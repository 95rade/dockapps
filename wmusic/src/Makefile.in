RCSS = wmusic.c Makefile.in config.h.in version.h.in

CC = @CC@

PREFIX = @prefix@

SRCS = wmusic.c ../libdockapp/dacallback.c ../libdockapp/dacolor.c \
	../libdockapp/daevent.c ../libdockapp/damain.c \
	../libdockapp/dapixmap.c ../libdockapp/darect.c
OBJS = $(SRCS:.c=.o)

CFLAGS = -Wall -g -O2 -I. -I../libdockapp `@PATH_GTKCONFIG@ --cflags` \
	`@PATH_XMMSCONFIG@ --cflags` \
	-DDATA_DIR=\"`@PATH_XMMSCONFIG@ --data-dir`\"
LDFLAGS = @LIBS@ -lXpm `@PATH_GTKCONFIG@ --libs` `@PATH_XMMSCONFIG@ --libs` \
	@DGA_LIBS@ @VM_LIBS@

all:		wmusic

install:	all
	if test ! -d $(PREFIX); then mkdir -p $(PREFIX); fi

	if test ! -d $(PREFIX)/bin; then mkdir -p $(PREFIX)/bin; fi

	@INSTALL@ -c -m 755 -s wmusic $(PREFIX)/bin

wmusic:		$(OBJS) $(IFLAGS)
	gcc -g -o wmusic $(OBJS) $(LDFLAGS)

uninstall:	clean
	rm -f $(PREFIX)/bin/wmusic

clean:
	rm -f *~ *.o ../libdockapp/*~ ../libdockapp/*.o core wmusic

distclean:	clean
	rm -f Makefile config.h version.h
