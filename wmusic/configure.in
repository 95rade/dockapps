dnl configure.in for wmusic

AC_PREREQ(2.12)

AC_INIT(src/wmusic.c)

VERSION=1.5.0
PACKAGE=wmusic
echo
echo "Configuring package: $PACKAGE-$VERSION"
echo

AC_PROG_CC
AC_PROG_INSTALL
AC_CONFIG_HEADER(src/config.h:src/config.h.in)

AC_PATH_X

dnl AC_CHECK_LIB(dockapp, DAProcessActionRects, ,
dnl	echo
dnl	echo "Error: libdockapp was not found"
dnl	echo
dnl	exit 1)

AC_CHECK_LIB(Xxf86vm,XF86VidModeQueryExtension,[
AC_DEFINE(XF86VIDMODE,1,[XF86VidMode extension is present])
VM_LIBS="-lXxf86vm"],,-L$x_libraries -lXext)

AC_CHECK_LIB(Xxf86dga,XF86DGAQueryExtension,[
AC_DEFINE(XF86DGA,1,[XF86DGA extension is present])
DGA_LIBS="-lXxf86dga"],,-L$x_libraries -lXext)

AC_PATH_PROG(PATH_XMMSCONFIG,xmms-config, no,
	$PATH:/usr/X11R6/bin:/usr/local/bin)

if test $PATH_XMMSCONFIG = "no"; then
	echo
	echo "It appears as if Xmms (X Multimedia System - http://www.xmms.org)"
	echo "is not installed on your computer."
	echo
	echo "If you have Xmms, make sure xmms-config is in your \$PATH"
	echo
	exit
fi

AC_PATH_PROG(PATH_GTKCONFIG,gtk-config, no,
	$PATH:/usr/X11R6/bin:/usr/local/bin)

if test $PATH_GTKCONFIG = "no"; then
	echo
	echo "It appears as if GTK+ - http://www.gtk.org)"
	echo "is not installed on your computer."
	echo
	echo "If you have gtk+, make sure gtk-config is in your \$PATH"
	echo
	exit
fi

AC_SUBST(DGA_LIBS)
AC_SUBST(VM_LIBS)
AC_SUBST(VERSION)
AC_SUBST(PACKAGE)
AC_OUTPUT(Makefile wmusic.spec src/Makefile src/version.h)
